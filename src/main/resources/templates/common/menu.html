<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">

<header th:fragment="header">
    <div id="logo">
        <a style="color: inherit;text-decoration: none;" th:href="@{/}">
            <img style="width: 70%;padding-top: 7px;padding-left: 10px" src="/img/mainlogo.png">
        </a>
    </div>
    <div id="button" style="margin-top: 3px">
        <a id="userStatus"></a>
        <a th:href="@{/logout}"><img id="loginout" src="/img/logout.png" alt="on"></a>
    </div>
</header>

<div id="sidebar" th:fragment="menu">
    <ul class="authenticated" style="display:none">
        <li class="firstMenu menu"><span>���� 愿�由�</span> <img src = "/img/arrow.png"></li>
        <ul class = "submenu">
            <li class="secondMenu"><a th:href="@{/activity}">- ����紐⑸�</a><br><a th:href="@{/request}">- �ㅼ�댁�� ��泥�</a></li>
        </ul>
        <li class="firstMenu"><a th:href="@{/user}">���� 愿�由�</a> <img src = "/img/arrow.png"></li>
        <li class="firstMenu"><a th:href="@{/interest}">愿��ъ�� 愿�由�</a> <img src = "/img/arrow.png"></li>
        <li class="firstMenu"><a th:href="@{/notice}">怨듭�</a> <img src = "/img/arrow.png"></li>
        <li class="firstMenu"><a th:href="@{/ranking}">���� 愿�由�</a> <img src = "/img/arrow.png"></li>

        <!-- 援ы���댁�쇳���� 湲곕�� -->
        <li class="firstMenu not-yet"><a th:href="@{/payment}" style="color: #b3b3b3">���� 寃곗��</a> <img src = "/img/arrow.png"></li>
        <li class="firstMenu not-yet"><a th:href="@{/community}" style="color: #b3b3b3">而ㅻ�ㅻ���� 愿�由�</a> <img src = "/img/arrow.png"></li>
        <li class="firstMenu not-yet"><a th:href="@{/ask}" style="color: #b3b3b3">臾몄��</a> <img src = "/img/arrow.png"></li>
        </li>
    </ul>
    <script>
        showSubMenu();

        function getStatus(){
            $.get("/userdata/getBasicInfo", function(data){
            	if(data.userType==1){
            		$(".authenticated").show();
            		var innerHtml = "";
                    if(data.status == 1){
                        innerHtml = "<img id='onoff' style='pointer-events: auto' src='/img/on.png' alt='on'>";
                    }
                    else{
                        innerHtml = "<img id='onoff' style='pointer-events: auto' src='/img/off.png' alt='off'>";
                    }
                    $('#userStatus').html(innerHtml);
                    addClickListener();
            	}
            	else if(location.pathname!="/"){
            		location.replace("/");
            	}
            });
        }

        getStatus();


        function addClickListener(){
            $('#onoff').click(function(){
                var isOn = !($('#onoff').attr('alt') == 'on');
                $.post("/userdata/setStatus", {isOn: isOn }, function(data){
                    var innerHtml = "";
                    getStatus();
                });
            });
        }
        
    </script>
</div>
</html>